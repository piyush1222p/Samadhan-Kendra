<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Samadhan Kendra</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* Forgot Password Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            display: none;
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
        }

        .modal-overlay.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .forgot-password-modal {
            background: white;
            border-radius: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            max-width: 480px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.4s ease-out;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1.5rem 2rem 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .modal-header h2 {
            color: #1f2937;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal-header h2 i {
            color: #dc2626;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.25rem;
            color: #6b7280;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.2s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: #f3f4f6;
            color: #374151;
        }

        .modal-body {
            padding: 2rem;
        }

        .forgot-password-content {
            text-align: center;
        }

        .forgot-password-icon {
            font-size: 4rem;
            color: #dc2626;
            margin-bottom: 1.5rem;
            animation: bounceIn 0.6s ease-out;
        }

        .forgot-password-description {
            color: #6b7280;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 2rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .forgot-password-form .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .forgot-password-form .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
            font-size: 0.875rem;
        }

        .forgot-password-form .input-group {
            position: relative;
            display: flex;
            align-items: center;
        }

        .forgot-password-form .input-group i {
            position: absolute;
            left: 1rem;
            color: #9ca3af;
            z-index: 2;
        }

        .forgot-password-form .input-group input {
            width: 100%;
            padding: 0.875rem 1rem 0.875rem 2.5rem;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .forgot-password-form .input-group input:focus {
            outline: none;
            border-color: #dc2626;
            box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
        }

        .forgot-password-form .input-group input.valid {
            border-color: #10b981;
        }

        .forgot-password-form .input-group input.invalid {
            border-color: #ef4444;
        }

        .input-validation {
            position: absolute;
            right: 1rem;
            display: flex;
            align-items: center;
        }

        .valid-icon, .invalid-icon {
            font-size: 1.125rem;
            display: none;
        }

        .valid-icon {
            color: #10b981;
        }

        .invalid-icon {
            color: #ef4444;
        }

        .validation-message {
            margin-top: 0.5rem;
            font-size: 0.875rem;
            min-height: 1.25rem;
        }

        .validation-message.valid {
            color: #10b981;
        }

        .validation-message.invalid {
            color: #ef4444;
        }

        .forgot-password-footer {
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e5e7eb;
        }

        .forgot-password-footer p {
            color: #6b7280;
            font-size: 0.875rem;
            margin: 0;
        }

        .forgot-password-footer a {
            color: #dc2626;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.2s ease;
        }

        .forgot-password-footer a:hover {
            color: #b91c1c;
            text-decoration: underline;
        }

        /* Success State */
        .forgot-password-success {
            text-align: center;
            animation: fadeInUp 0.5s ease-out;
        }

        .success-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1.5rem;
            animation: scaleIn 0.6s ease-out;
        }

        .forgot-password-success h3 {
            color: #1f2937;
            font-size: 1.5rem;
            font-weight: 600;
            margin: 0 0 1rem 0;
        }

        .forgot-password-success p {
            color: #6b7280;
            font-size: 1rem;
            line-height: 1.6;
            margin-bottom: 1rem;
        }

        .success-note {
            color: #9ca3af;
            font-size: 0.875rem;
            font-style: italic;
            margin-bottom: 2rem;
        }

        /* Loading State */
        .btn-loading {
            position: relative;
            color: transparent !important;
        }

        .btn-loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes bounceIn {
            0% { 
                opacity: 0;
                transform: scale(0.3);
            }
            50% { 
                opacity: 1;
                transform: scale(1.05);
            }
            70% { 
                transform: scale(0.9);
            }
            100% { 
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.5);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Mobile Responsiveness */
        @media (max-width: 640px) {
            .forgot-password-modal {
                width: 95%;
                margin: 1rem;
            }

            .modal-header {
                padding: 1rem 1.5rem 0.75rem;
            }

            .modal-header h2 {
                font-size: 1.25rem;
            }

            .modal-body {
                padding: 1.5rem;
            }

            .forgot-password-icon {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .forgot-password-description {
                font-size: 0.875rem;
                margin-bottom: 1.5rem;
            }

            .forgot-password-form .input-group input {
                padding: 0.75rem 1rem 0.75rem 2.25rem;
                font-size: 0.875rem;
            }

            .success-icon {
                font-size: 3rem;
                margin-bottom: 1rem;
            }

            .forgot-password-success h3 {
                font-size: 1.25rem;
            }
        }

        /* Accessibility */
        .modal-overlay:focus-within {
            outline: 2px solid #dc2626;
            outline-offset: 2px;
        }

        .modal-close:focus {
            outline: 2px solid #dc2626;
            outline-offset: 2px;
        }

        .forgot-password-form .input-group input:focus {
            outline: 2px solid #dc2626;
            outline-offset: 2px;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            .modal-overlay {
                background: rgba(0, 0, 0, 0.8);
            }
            
            .forgot-password-modal {
                border: 2px solid #000;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            .modal-overlay,
            .forgot-password-modal,
            .forgot-password-icon,
            .success-icon {
                animation: none;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <i class="fas fa-handshake"></i>
                    <span>Samadhan Kendra</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Home</a></li>
                <li><a href="index.html#report" class="nav-link">Report Issue</a></li>
                <li><a href="index.html#issues" class="nav-link">View Issues</a></li>
                <li><a href="index.html#leaderboard" class="nav-link">Leaderboard</a></li>
                <li><a href="index.html#about" class="nav-link">About</a></li>
            </ul>
            <div class="nav-user">
                <div class="user-points">
                    <i class="fas fa-star"></i>
                                            <span id="navUserPoints">0</span>
                </div>
                <div class="user-avatar" onclick="toggleProfileMenu()">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="profile-dropdown" id="profileDropdown">
                    <a href="#" onclick="handleProfileAccess()"><i class="fas fa-user"></i> Profile</a>
                    <a href="rewards-program.html"><i class="fas fa-gift"></i> Rewards</a>
                    <a href="login.html"><i class="fas fa-sign-in-alt"></i> Login</a>
                    <a href="register.html"><i class="fas fa-user-plus"></i> Register</a>
                    <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
            <div class="hamburger">
                <span class="bar"></span>
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
        </div>
    </nav>

    <!-- Login Section -->
    <section class="auth-section">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1>Welcome Back</h1>
                    <p>Login to your Samadhan Kendra account to continue making a difference</p>
                </div>
                
                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <div class="input-group">
                            <i class="fas fa-envelope"></i>
                            <input type="email" id="email" placeholder="Enter your email" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Password</label>
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="password" id="password" placeholder="Enter your password" required>
                            <button type="button" class="password-toggle" onclick="togglePassword()">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-container">
                            <input type="checkbox" id="rememberMe">
                            <span class="checkmark"></span>
                            Remember me
                        </label>
                        <a href="#" class="forgot-password" onclick="showForgotPassword()">Forgot Password?</a>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">
                        <i class="fas fa-sign-in-alt"></i>
                        Login to Account
                    </button>
                    

                </form>
                
                <!-- Forgot Password Modal -->
                <div id="forgotPasswordModal" class="modal-overlay">
                    <div class="modal-content forgot-password-modal">
                        <div class="modal-header">
                            <h2><i class="fas fa-key"></i> Reset Your Password</h2>
                            <button type="button" class="modal-close" onclick="closeForgotPassword()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div class="modal-body">
                            <div class="forgot-password-content">
                                <div class="forgot-password-icon">
                                    <i class="fas fa-envelope-open-text"></i>
                                </div>
                                
                                <p class="forgot-password-description">
                                    Enter your registered email address and we'll send you a password reset link.
                                </p>
                                
                                <form id="forgotPasswordForm" class="forgot-password-form">
                                    <div class="form-group">
                                        <label for="resetEmail">Email Address</label>
                                        <div class="input-group">
                                            <i class="fas fa-envelope"></i>
                                            <input 
                                                type="email" 
                                                id="resetEmail" 
                                                placeholder="Enter your registered email"
                                                required
                                                oninput="validateResetEmail(this.value)"
                                            >
                                            <div class="input-validation">
                                                <i class="fas fa-check-circle valid-icon" id="validEmailIcon"></i>
                                                <i class="fas fa-exclamation-circle invalid-icon" id="invalidEmailIcon"></i>
                                            </div>
                                        </div>
                                        <div class="validation-message" id="emailValidationMessage"></div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary btn-full" id="resetPasswordBtn">
                                        <i class="fas fa-paper-plane"></i>
                                        Send Reset Link
                                    </button>
                                </form>
                                
                                <div class="forgot-password-footer">
                                    <p>Remember your password? <a href="#" onclick="closeForgotPassword()">Back to Login</a></p>
                                </div>
                            </div>
                            
                            <!-- Success State -->
                            <div class="forgot-password-success" id="forgotPasswordSuccess" style="display: none;">
                                <div class="success-icon">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                                <h3>Reset Link Sent!</h3>
                                <p>If this email is registered, a password reset link will be sent to your inbox.</p>
                                <p class="success-note">Please check your email and follow the instructions to reset your password.</p>
                                <button type="button" class="btn btn-secondary btn-full" onclick="closeForgotPassword()">
                                    <i class="fas fa-arrow-left"></i>
                                    Back to Login
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="auth-divider">
                    <span>or</span>
                </div>
                
                <div class="social-login">
                    <button class="btn btn-social btn-google">
                        <i class="fab fa-google"></i>
                        Continue with Google
                    </button>
                    <button class="btn btn-social btn-facebook">
                        <i class="fab fa-facebook-f"></i>
                        Continue with Facebook
                    </button>
                </div>
                
                <div class="auth-footer">
                    <p>Don't have an account? <a href="register.html">Sign up here</a></p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Samadhan Kendra</h3>
                    <p>Empowering Indian citizens through AI-driven civic engagement and smart city solutions.</p>
                   
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="index.html#report">Report Issue</a></li>
                        <li><a href="index.html#issues">View Issues</a></li>
                        <li><a href="index.html#leaderboard">Leaderboard</a></li>
                        <li><a href="index.html#about">About</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Support</h4>
                    <ul>
                        <li><a href="help-center.html">Help Center</a></li>
                        <li><a href="contact.html">Contact Us</a></li>
                        <li><a href="privacy-policy.html">Privacy Policy</a></li>
                        <li><a href="terms-of-service.html">Terms of Service</a></li>
                        <li><a href="rewards-program.html">Rewards Program</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Samadhan Kendra. Empowering India's Smart Cities.</p>
            </div>
        </div>
    </footer>

    <script>
        // Mobile Navigation Toggle
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
        }

        // Close mobile menu when clicking on a link
        const navLinks = document.querySelectorAll('.nav-link');
        if (navLinks.length > 0) {
            navLinks.forEach(n => n.addEventListener('click', () => {
                if (hamburger && navMenu) {
                    hamburger.classList.remove('active');
                    navMenu.classList.remove('active');
                }
            }));
        }

        // Password toggle functionality
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const toggleBtn = document.querySelector('.password-toggle i');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleBtn.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                toggleBtn.className = 'fas fa-eye';
            }
        }

        // Login form handling
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            // Validate inputs
            if (!email || !password) {
                alert('Please enter both email and password');
                return;
            }
            
            // Simulate login process
            const submitBtn = this.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Logging in...';
            submitBtn.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Store user data in localStorage (simulating successful login)
                localStorage.setItem('userLoggedIn', 'true');
                localStorage.setItem('userEmail', email);
                localStorage.setItem('userPoints', '1250');
                localStorage.setItem('userFirstName', 'John');
                localStorage.setItem('userLastName', 'Doe');
                localStorage.setItem('userCity', 'mumbai');
                localStorage.setItem('userIssues', '8');
                localStorage.setItem('userRank', '5');
                localStorage.setItem('userPhone', '+91 98765 43210');
                
                // Update points display immediately
                if (typeof initializePointsDisplay === 'function') {
                    initializePointsDisplay();
                }
                
                // Show success message before redirect
                alert('Login successful! Redirecting to profile page...');
                
                // Redirect to profile page
                window.location.href = 'profile.html';
            }, 2000);
        });

        // Profile dropdown toggle
        function toggleProfileMenu() {
            const dropdown = document.getElementById('profileDropdown');
            dropdown.classList.toggle('active');
        }

        // Close dropdown when clicking outside
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('profileDropdown');
            const avatar = document.querySelector('.user-avatar');
            
            if (!avatar.contains(event.target) && !dropdown.contains(event.target)) {
                dropdown.classList.remove('active');
            }
        });

        // Logout function
        function logout() {
            // Use centralized logout if available
            if (typeof window.logout === 'function') {
                window.logout();
            } else {
                // Fallback logout
                localStorage.removeItem('userLoggedIn');
                localStorage.removeItem('userEmail');
                localStorage.removeItem('userPoints');
                localStorage.removeItem('userFirstName');
                localStorage.removeItem('userLastName');
                localStorage.removeItem('userCity');
                
                // Redirect to home page
                window.location.href = 'index.html';
            }
        }

        // Load user data if logged in
        function loadUserData() {
            // Use centralized points display system
            if (typeof initializePointsDisplay === 'function') {
                initializePointsDisplay();
            }
        }



        // Forgot Password Functionality - Global Functions
        function initializeForgotPassword() {
            const forgotPasswordForm = document.getElementById('forgotPasswordForm');
            if (forgotPasswordForm) {
                forgotPasswordForm.addEventListener('submit', handleForgotPasswordSubmit);
            }
        }

        // Prevent logged-in users from accessing login page
        document.addEventListener('DOMContentLoaded', function() {
            // Check if user is already logged in
            if (typeof isUserLoggedIn === 'function' && isUserLoggedIn()) {
                if (typeof preventLoggedInAccess === 'function') {
                    preventLoggedInAccess();
                } else {
                    // Fallback redirect
                    window.location.replace('profile.html');
                }
                return;
            }
            
            // Initialize forgot password functionality
            initializeForgotPassword();
            
            // Initialize points display
            if (typeof initializePointsDisplay === 'function') {
                initializePointsDisplay();
            }
        });

        function showForgotPassword() {
            const modal = document.getElementById('forgotPasswordModal');
            if (modal) {
                modal.classList.add('show');
                document.body.style.overflow = 'hidden';
                
                // Focus on the email input for accessibility
                setTimeout(() => {
                    const resetEmailInput = document.getElementById('resetEmail');
                    if (resetEmailInput) {
                        resetEmailInput.focus();
                    }
                }, 100);
            }
        }
        
        // Make functions globally available
        window.showForgotPassword = showForgotPassword;
        window.closeForgotPassword = closeForgotPassword;
        window.resetForgotPasswordForm = resetForgotPasswordForm;
        window.validateResetEmail = validateResetEmail;
        window.handleForgotPasswordSubmit = handleForgotPasswordSubmit;
        window.showForgotPasswordSuccess = showForgotPasswordSuccess;

        function closeForgotPassword() {
            const modal = document.getElementById('forgotPasswordModal');
            if (modal) {
                modal.classList.remove('show');
                document.body.style.overflow = '';
                
                // Reset form and validation
                resetForgotPasswordForm();
            }
        }

        function resetForgotPasswordForm() {
            const form = document.getElementById('forgotPasswordForm');
            const successDiv = document.getElementById('forgotPasswordSuccess');
            const contentDiv = document.querySelector('.forgot-password-content');
            
            if (form) {
                form.reset();
            }
            
            // Clear validation states
            const resetEmailInput = document.getElementById('resetEmail');
            if (resetEmailInput) {
                resetEmailInput.classList.remove('valid', 'invalid');
            }
            
            // Hide validation icons and messages
            const validIcon = document.getElementById('validEmailIcon');
            const invalidIcon = document.getElementById('invalidEmailIcon');
            const validationMessage = document.getElementById('emailValidationMessage');
            
            if (validIcon) validIcon.style.display = 'none';
            if (invalidIcon) invalidIcon.style.display = 'none';
            if (validationMessage) {
                validationMessage.textContent = '';
                validationMessage.className = 'validation-message';
            }
            
            // Show form content, hide success
            if (contentDiv) contentDiv.style.display = 'block';
            if (successDiv) successDiv.style.display = 'none';
        }

        function validateResetEmail(email) {
            const resetEmailInput = document.getElementById('resetEmail');
            const validIcon = document.getElementById('validEmailIcon');
            const invalidIcon = document.getElementById('invalidEmailIcon');
            const validationMessage = document.getElementById('emailValidationMessage');
            
            if (!resetEmailInput || !validIcon || !invalidIcon || !validationMessage) {
                return false;
            }
            
            // Email validation regex
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const isValid = emailRegex.test(email);
            
            // Update input styling
            resetEmailInput.classList.remove('valid', 'invalid');
            resetEmailInput.classList.add(isValid ? 'valid' : 'invalid');
            
            // Update validation icons
            validIcon.style.display = isValid ? 'block' : 'none';
            invalidIcon.style.display = isValid ? 'none' : 'block';
            
            // Update validation message
            if (email === '') {
                validationMessage.textContent = '';
                validationMessage.className = 'validation-message';
            } else if (isValid) {
                validationMessage.textContent = '✓ Valid email format';
                validationMessage.className = 'validation-message valid';
            } else {
                validationMessage.textContent = '✗ Please enter a valid email address';
                validationMessage.className = 'validation-message invalid';
            }
            
            return isValid;
        }

        async function handleForgotPasswordSubmit(event) {
            event.preventDefault();
            
            const resetEmailInput = document.getElementById('resetEmail');
            const resetPasswordBtn = document.getElementById('resetPasswordBtn');
            const email = resetEmailInput.value.trim();
            
            // Validate email
            if (!validateResetEmail(email)) {
                // Shake animation for invalid input
                resetEmailInput.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    resetEmailInput.style.animation = '';
                }, 500);
                return;
            }
            
            // Show loading state
            resetPasswordBtn.classList.add('btn-loading');
            resetPasswordBtn.disabled = true;
            
            try {
                // Simulate API call delay
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Show success state
                showForgotPasswordSuccess();
                
            } catch (error) {
                console.error('Error in forgot password:', error);
                // In a real app, you'd show an error message here
            } finally {
                // Reset button state
                resetPasswordBtn.classList.remove('btn-loading');
                resetPasswordBtn.disabled = false;
            }
        }

        function showForgotPasswordSuccess() {
            const contentDiv = document.querySelector('.forgot-password-content');
            const successDiv = document.getElementById('forgotPasswordSuccess');
            
            if (contentDiv && successDiv) {
                contentDiv.style.display = 'none';
                successDiv.style.display = 'block';
            }
        }

        // Close modal when clicking outside
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('forgotPasswordModal');
            if (modal && event.target === modal) {
                closeForgotPassword();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeForgotPassword();
            }
        });

        // Add shake animation for invalid input
        const style = document.createElement('style');
        style.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-5px); }
                75% { transform: translateX(5px); }
            }
        `;
        document.head.appendChild(style);
    </script>
    
    <script src="script.js"></script>
    <script>
        // Initialize points display when script.js is loaded
        if (typeof initializePointsDisplay === 'function') {
            initializePointsDisplay();
        }
    </script>
    
    <!-- Chatbot Integration -->
    <script src="https://cdn.botpress.cloud/webchat/v3.2/inject.js"></script>
    <script src="https://files.bpcontent.cloud/2025/08/31/14/20250831144221-5HKMW4DF.js" defer></script>
</body>
</html>
